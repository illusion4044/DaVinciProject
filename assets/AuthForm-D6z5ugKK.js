import{R as l,c as A,x as _,y as W,u as R,z as Z,A as $,r as m,a as k,B as L,j as s,F as T,C as U,D as j,E as v,L as D,G as M,_ as g,H as q}from"./index-DmRHIgrv.js";var S={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y=l.createContext&&l.createContext(S),B=["attr","size","title"];function G(e,r){if(e==null)return{};var t=H(e,r),a,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(t[a]=e[a])}return t}function H(e,r){if(e==null)return{};var t={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;t[a]=e[a]}return t}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},h.apply(this,arguments)}function P(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,a)}return t}function w(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?P(Object(t),!0).forEach(function(a){K(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function K(e,r,t){return r=V(r),r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function V(e){var r=J(e,"string");return typeof r=="symbol"?r:r+""}function J(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r||"default");if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function C(e){return e&&e.map((r,t)=>l.createElement(r.tag,w({key:t},r.attr),C(r.child)))}function E(e){return r=>l.createElement(Q,h({attr:w({},e.attr)},r),C(e.child))}function Q(e){var r=t=>{var{attr:a,size:o,title:i}=e,p=G(e,B),u=o||t.size||"1em",c;return t.className&&(c=t.className),e.className&&(c=(c?c+" ":"")+e.className),l.createElement("svg",h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,p,{className:c,style:w(w({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&l.createElement("title",null,i),e.children)};return y!==void 0?l.createElement(y.Consumer,null,t=>r(t)):r(S)}function O(e){return E({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M245.48,125.57c-.34-.78-8.66-19.23-27.24-37.81C201,70.54,171.38,50,128,50S55,70.54,37.76,87.76c-18.58,18.58-26.9,37-27.24,37.81a6,6,0,0,0,0,4.88c.34.77,8.66,19.22,27.24,37.8C55,185.47,84.62,206,128,206s73-20.53,90.24-37.75c18.58-18.58,26.9-37,27.24-37.8A6,6,0,0,0,245.48,125.57ZM128,194c-31.38,0-58.78-11.42-81.45-33.93A134.77,134.77,0,0,1,22.69,128,134.56,134.56,0,0,1,46.55,95.94C69.22,73.42,96.62,62,128,62s58.78,11.42,81.45,33.94A134.56,134.56,0,0,1,233.31,128C226.94,140.21,195,194,128,194Zm0-112a46,46,0,1,0,46,46A46.06,46.06,0,0,0,128,82Zm0,80a34,34,0,1,1,34-34A34,34,0,0,1,128,162Z"},child:[]}]})(e)}function N(e){return E({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M53.92,34.62A8,8,0,1,0,42.08,45.38L61.32,66.55C25,88.84,9.38,123.2,8.69,124.76a8,8,0,0,0,0,6.5c.35.79,8.82,19.57,27.65,38.4C61.43,194.74,93.12,208,128,208a127.11,127.11,0,0,0,52.07-10.83l22,24.21a8,8,0,1,0,11.84-10.76Zm47.33,75.84,41.67,45.85a32,32,0,0,1-41.67-45.85ZM128,192c-30.78,0-57.67-11.19-79.93-33.25A133.16,133.16,0,0,1,25,128c4.69-8.79,19.66-33.39,47.35-49.38l18,19.75a48,48,0,0,0,63.66,70l14.73,16.2A112,112,0,0,1,128,192Zm6-95.43a8,8,0,0,1,3-15.72,48.16,48.16,0,0,1,38.77,42.64,8,8,0,0,1-7.22,8.71,6.39,6.39,0,0,1-.75,0,8,8,0,0,1-8-7.26A32.09,32.09,0,0,0,134,96.57Zm113.28,34.69c-.42.94-10.55,23.37-33.36,43.8a8,8,0,1,1-10.67-11.92A132.77,132.77,0,0,0,231.05,128a133.15,133.15,0,0,0-23.12-30.77C185.67,75.19,158.78,64,128,64a118.37,118.37,0,0,0-19.36,1.57A8,8,0,1,1,106,49.79,134,134,0,0,1,128,48c34.88,0,66.57,13.26,91.66,38.35,18.83,18.83,27.3,37.62,27.65,38.41A8,8,0,0,1,247.31,131.26Z"},child:[]}]})(e)}const X="_wrap_form_wb15z_1",Y="_form_wb15z_7",ee="_title_wb15z_15",re="_label_wb15z_25",te="_errorText_wb15z_40",ae="_errorField_wb15z_50",se="_field_wb15z_55",ne="_inputWrapper_wb15z_72",ie="_iconWrapper_wb15z_76",oe="_icon_wb15z_76",ce="_btn_wb15z_87",le="_link_wb15z_111",de="_focus_wb15z_116",n={wrap_form:X,form:Y,title:ee,label:re,errorText:te,errorField:ae,field:se,inputWrapper:ne,iconWrapper:ie,icon:oe,btn:ce,link:le,focus:de},me=A().shape({email:_().email("Must be a valid email!").required("Required"),password:_().min(8,"Must be at least 8 characters!").required("Required"),repeatPassword:_().oneOf([W("password"),null],"Passwords must match")}),fe=()=>{const e=R(),r=Z(),t=$(),[a,o]=m.useState(!1),[i,p]=m.useState("Sign Up"),u=m.useId(),c=m.useId(),x=m.useId(),z={email:k(L).email??"",password:"",repeatPassword:""};m.useEffect(()=>{r.pathname==="/login"?p("Sign In"):r.pathname==="/register"&&p("Sign Up")},[r.pathname]);const F=({repeatPassword:f,...d},I)=>{switch(i){case"Sign Up":e(q(d)).unwrap().then(()=>{g.success("Registration success!"),t("/login")}).catch(b=>{console.error("Registration error: ",b),g.error("Registration failed. Please check your information and try again.")});break;case"Sign In":e(M(d)).unwrap().then(()=>{g.success("Login success!")}).catch(b=>{console.error("Login error: ",b),g.error("Incorrect login or password. Please try again")});break}I.resetForm()};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:n.wrap_form,children:[s.jsx(T,{initialValues:z,validationSchema:me,onSubmit:F,children:({errors:f,touched:d})=>s.jsxs(U,{className:n.form,children:[s.jsx("h2",{className:n.title,children:i}),s.jsxs("div",{children:[s.jsx("label",{className:n.label,htmlFor:u,children:"Enter your email"}),s.jsx(j,{className:`${n.field} ${f.email&&d.email?n.errorField:""}`,type:"email",name:"email",id:u,placeholder:"Email"}),s.jsx(v,{name:"email",component:"div",className:n.errorText})]}),s.jsxs("div",{className:n.inputWrapper,children:[s.jsx("label",{className:n.label,htmlFor:c,children:"Enter your password"}),s.jsx(j,{className:`${n.field} ${d.password&&f.password?n.errorField:""}`,type:a?"text":"password",name:"password",id:c,placeholder:"Password"}),s.jsx("div",{className:n.iconWrapper,onClick:()=>o(!a),children:a?s.jsx(O,{className:n.icon}):s.jsx(N,{className:n.icon})}),s.jsx(v,{name:"password",component:"div",className:n.errorText})]}),i==="Sign Up"&&s.jsxs("div",{className:n.inputWrapper,children:[s.jsx("label",{className:n.label,htmlFor:x,children:"Repeat password"}),s.jsx(j,{className:`${n.field} ${d.password&&f.password?n.errorField:""}`,type:a?"text":"password",name:"repeatPassword",id:x,placeholder:"Repeat password"}),s.jsx("div",{className:n.iconWrapper,onClick:()=>o(!a),children:a?s.jsx(O,{className:n.icon}):s.jsx(N,{className:n.icon})}),s.jsx(v,{name:"repeatPassword",component:"div",className:n.errorText})]}),s.jsx("button",{className:n.btn,type:"submit",children:i})]})}),s.jsx("nav",{children:s.jsx(D,{to:i==="Sign In"?"/register":"/login",className:n.link,onClick:()=>p(i==="Sign In"?"Sign Up":"Sign In"),children:i==="Sign In"?"Sign Up":"Sign In"})})]})})};export{fe as A};
